#!/usr/bin/env bash

# Original arguments
args=("$@")

# Filtered arguments (up to first "--")
filtered_args=()
for arg in "${args[@]}"; do
  if [[ "$arg" == -- ]]; then
    break
  fi
  filtered_args+=("$arg")
done

cd @ENGINE_PATH@/voicevox_engine/
# Now use "${filtered_args[@]}" instead of "$@"
exec @VENV_PATH@/bin/python - "${filtered_args[@]}" <<- EOF
import re
import sys

from setproctitle import setproctitle

program_path = "./run.py"
setproctitle(' '.join(["run.py"] + sys.argv[1:]))
exec(open(program_path).read())
EOF
