<launch>
  <machine name="localhost" address="localhost" />

  <arg name="sound_play_machine" default="localhost"
       doc="Machine to run sound_play node (default: localhost)" />
  <arg name="sound_play_respawn" default="true"
       doc="Respawn sound_play node or not (default: true)" />
  <arg name="credential" default="$(env GOOGLE_APPLICATION_CREDENTIALS)"
       doc="Credential json path for Google Cloud Text-to-Speech (default: $GOOGLE_APPLICATION_CREDENTIALS)" />
  <arg name="use_english" default="true" 
       doc="Use  Google Cloud Text-to-Speech for English or not (default: true)" />
  <arg name="use_japanese" default="true"
       doc="Use  Google Cloud Text-to-Speech for Japanese or not (default: true)" />
  <arg name="english_speed" default="100"
       doc="English speaking speed (default: 100)" />
  <arg name="japanese_speed" default="100"
       doc="Japanese speaking speed (default: 100)" />

  <node name="sound_play" if="$(use_english)"
        pkg="sound_play" type="soundplay_node.py"
        respawn="$(arg sound_play_respawn)"
        machine="$(arg sound_play_machine)"
        output="screen" >
    <remap from="robotsound" to="robotsound"/>
    <remap from="sound_play" to="robotsound"/>
    <env name="PATH" value="$(find sound_play)/bin:$(env PATH)" />
    <env name="PYTHONIOENCODING" value="utf-8" />
    <env name="GOOGLE_APPLICATION_CREDENTIALS" value="$(arg credential)" />
    <rosparam subst_value="true">
      speaking_rate: $(arg english_speed)
    </rosparam>
  </node>

  <node name="sound_play_jp" if="$(use_japanese)"
        pkg="sound_play" type="soundplay_node.py"
        respawn="$(arg sound_play_respawn)"
        machine="$(arg sound_play_machine)"
        output="screen" >
    <remap from="robotsound" to="robotsound_jp"/>
    <remap from="sound_play" to="robotsound_jp"/>
    <env name="PATH" value="$(find sound_play)/bin:$(env PATH)" />
    <env name="PYTHONIOENCODING" value="utf-8" />
    <env name="GOOGLE_APPLICATION_CREDENTIALS" value="$(arg credential)" />
    <rosparam subst_value="true">
      speaking_rate: $(arg japanese_speed)
    </rosparam>
  </node>
</launch>
